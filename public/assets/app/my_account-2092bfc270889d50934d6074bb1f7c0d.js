(function(){var e;e=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,window.CARD_TYPE_VALIDATORS=[{value:"USA_express",reg:/^3[47][0-9]{13}$/},{value:"discover",reg:/^6(?:011|5[0-9]{2})[0-9]{12}$/},{value:"visa",reg:/^4[0-9]{12}(?:[0-9]{3})?$/},{value:"jcb",reg:/^(?:2131|1800|35\d{3})\d{11}$/},{value:"dinners_club",reg:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/},{value:"master_card",reg:/^5[1-5][0-9]{14}$/}],$(function(){return $("#user_card_number").change(function(){var e,t,n,r,i;e=$("#user_card_type").val();if(e==="")return helper.show_notification("Please choose card type!");i=[];for(n=0,r=CARD_TYPE_VALIDATORS.length;n<r;n++){t=CARD_TYPE_VALIDATORS[n];if(t.value===e){t.reg.test($(this).val())||helper.show_notification("Your card number does not match "+$("#user_card_type option:selected").text()+"!");break}i.push(void 0)}return i}),$("#user_card_type").change(function(){var e,t,n,r,i;e=$("#user_card_number").val(),i=[];for(n=0,r=CARD_TYPE_VALIDATORS.length;n<r;n++){t=CARD_TYPE_VALIDATORS[n];if(t.value===$(this).val()){e!==""&&!t.reg.test(e)&&helper.show_notification("Your card number does not match "+$("#user_card_type option:selected").text()+"!");break}i.push(void 0)}return i}),$("#cvv-explanation").click(function(e){var t,n,r;return t=$("#cvv-form"),n=e.clientX-155,r=e.clientY-t.height(),$("#cvv-form").modal({opacity:5,overlayClose:!0,position:[r,n]})}),$("#cvv-form .close").click(function(){return $.modal.close()})})}).call(this);