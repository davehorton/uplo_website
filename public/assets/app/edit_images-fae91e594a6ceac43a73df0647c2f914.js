((function(){var a,b;b=function(a,b,c){var d,e,f,g,h,i;return d=$(document.createElement("div")).addClass("clear"),h=$(document.createElement("div")).addClass("line-separator left"),g=$(document.createElement("div")),g.attr("title",c),g.addClass("image-container thumb no-padding"),g.append(b),e=$(document.createElement("div")),e.addClass("info-panel left"),i=$(document.createElement("div")),i.addClass("info-line left"),f=$(document.createElement("div")),f.addClass("label text black bold font12"),f.text(c),i.append(f),e.append(i),a.addClass("upload-template container left"),a.append(g),a.append(e),a.append(d),a.append(h),a},a=function(a){var c;return c=$(document.createElement("div")),window.loadImage(a,function(d){return b(c,d,a.name),c.prependTo("#images-panel")},{maxWidth:155,maxHeight:155,canvas:!0}),c},$(function(){return $("#fileupload").fileupload(),$("#fileupload").fileupload("option",{maxFileSize:5e6,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,previewMaxWidth:180,previewMaxHeight:180,displayNumber:page_size,add:function(b,c){return c.context=a(c.files[0]),c.submit()},done:function(a,b){return $(b.context).replaceWith(b.result.item),$(".pagination").replaceWith(b.result.pagination),$("#images-panel").children().last().remove()}}),$(".button.save-grid-changes").click(function(){var a,b;return a=[],b=$("#images-panel .edit-template"),b.each(function(b,c){var d;return d=$(c),a.push({id:d.attr("data-id"),name:d.find("#image_name").val(),gallery_id:d.find("#image_gallery_id").val(),price:d.find("#image_price").val(),description:d.find("#image_description").val(),is_album_cover:d.find("#image_album_cover").val(),is_avatar:d.find("#user_avatar").val(),keyword:d.find("#image_key_words").val()})}),$.ajax({url:"images/update_images",type:"POST",data:{images:$.toJSON(a),gallery_id:$("#gallery_selector_id").val()},dataType:"json",success:function(a){return $("#images-panel")[0].innerHTML=a.items,$(".pagination").replaceWith(a.pagination)}})}),$("#gallery_selector_id").change(function(){return $.ajax({url:"edit_images",type:"GET",data:{gallery_id:$("#gallery_selector_id").val()},dataType:"json",success:function(a){return $("#images-panel")[0].innerHTML=a.items,$(".pagination").replaceWith(a.pagination)}})})})})).call(this);