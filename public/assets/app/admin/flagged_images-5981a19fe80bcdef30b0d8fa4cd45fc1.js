flagged_images={setup_forms:function(){$(".action-container").delegate(".button.reinstate","click",function(e){var t=e.target;$(t).hasClass("disabled")||flagged_images.do_action(t)}),$(".action-container").delegate(".button.remove","click",function(e){var t=e.target;$(t).hasClass("disabled")||flagged_images.do_action(t)}),$(".action-container").delegate("#remove_flagged_images","click",function(e){var t=e.target;$(t).hasClass("disabled")||flagged_images.do_action(t)}),$(".action-container").delegate("#reinstate_flagged_images","click",function(e){var t=e.target;$(t).hasClass("disabled")||flagged_images.do_action(t)}),flagged_images.setup_image_popup()},do_action:function(e){$("#flagged-images-confirm-popup").modal();var t=$(e).attr("data-confirm");$("#flagged-images-confirm-popup").find("#confirm-message-container").text(t),$("#btn-ok").click(function(){$.modal.close(),window.setTimeout("$('#mask').modal()",200);var t=$(e).find("form.action-form"),n=$(t).attr("action"),r=$(t).serialize();if(!n||!r)return!1;$.ajax({url:n,type:"POST",data:r,success:function(t){var n=!0;if(t.status=="ok"){$(e).addClass("disabled");var r=$.trim(t.redirect_url);r&&r!=""&&(n=!1,window.location.href=r)}else jQuery.trim(t.message)!=""&&helper.show_notification(t.message);n&&$.modal.close()}})})},setup_image_popup:function(){$(".image_frame, .flagged_image_container .image_name .image_link").click(function(e){e.preventDefault();var t=$.trim($(this).attr("data-url"));if(t=="")return!1;$("#mask").modal(),$.ajax({url:t,type:"GET",dataType:"json",success:function(e){$.modal.close(),e.success?(setTimeout(flagged_images.show_popup,100),$("#flagged_image_popup").html(e.data)):helper.show_notification(e.msg)},error:function(){$.modal.close()}})})},show_popup:function(){$("#flagged_image_popup").modal()}};