flagged_images={setup_forms:function(){$(".action-container").delegate(".button.reinstate","click",function(a){var b=a.target;$(b).hasClass("disabled")||flagged_images.do_action(b)}),$(".action-container").delegate(".button.remove","click",function(a){var b=a.target;$(b).hasClass("disabled")||flagged_images.do_action(b)}),$(".action-container").delegate("#remove_flagged_images","click",function(a){var b=a.target;$(b).hasClass("disabled")||flagged_images.do_action(b)}),$(".action-container").delegate("#reinstate_flagged_images","click",function(a){var b=a.target;$(b).hasClass("disabled")||flagged_images.do_action(b)}),flagged_images.setup_image_popup()},do_action:function(a){$("#flagged-images-confirm-popup").modal();var b=$(a).attr("data-confirm");$("#flagged-images-confirm-popup").find("#confirm-message-container").text(b),$("#btn-ok").click(function(){$.modal.close(),window.setTimeout("$('#mask').modal()",200);var b=$(a).find("form.action-form"),c=$(b).attr("action"),d=$(b).serialize();if(!c||!d)return!1;$.ajax({url:c,type:"POST",data:d,success:function(b){var c=!0;if(b.status=="ok"){$(a).addClass("disabled");var d=$.trim(b.redirect_url);d&&d!=""&&(c=!1,window.location.href=d)}else jQuery.trim(b.message)!=""&&helper.show_notification(b.message);c&&$.modal.close()}})})},setup_image_popup:function(){$(".image_frame, .flagged_image_container .image_name .image_link").click(function(a){a.preventDefault();var b=$.trim($(this).attr("data-url"));if(b=="")return!1;$("#mask").modal(),$.ajax({url:b,type:"GET",dataType:"json",success:function(a){$.modal.close(),a.success?(setTimeout(flagged_images.show_popup,100),$("#flagged_image_popup").html(a.data)):helper.show_notification(a.msg)},error:function(){$.modal.close()}})})},show_popup:function(){$("#flagged_image_popup").modal()}};