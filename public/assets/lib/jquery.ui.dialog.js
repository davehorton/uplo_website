/*
 * jQuery UI Dialog 1.7.3
 *
 * Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	ui.core.js
 *	ui.draggable.js
 *	ui.resizable.js
 */
(function(a){var b={dragStart:"start.draggable",drag:"drag.draggable",dragStop:"stop.draggable",maxHeight:"maxHeight.resizable",minHeight:"minHeight.resizable",maxWidth:"maxWidth.resizable",minWidth:"minWidth.resizable",resizeStart:"start.resizable",resize:"drag.resizable",resizeStop:"stop.resizable"},c="ui-dialog ui-widget ui-widget-content ui-corner-all ";a.widget("ui.dialog",{_init:function(){this.originalTitle=this.element.attr("title");var b=this,d=this.options,e=d.title||this.originalTitle||"&nbsp;",f=a.ui.dialog.getTitleId(this.element),g=(this.uiDialog=a("<div/>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({position:"absolute",overflow:"hidden",zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&c.keyCode&&c.keyCode==a.ui.keyCode.ESCAPE&&b.close(c)}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),i=(this.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),j=a('<a href="#"/>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).mousedown(function(a){a.stopPropagation()}).click(function(a){return b.close(a),!1}).appendTo(i),k=(this.uiDialogTitlebarCloseText=a("<span/>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),l=a("<span/>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i);i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&this._makeDraggable(),d.resizable&&a.fn.resizable&&this._makeResizable(),this._createButtons(d.buttons),this._isOpen=!1,d.bgiframe&&a.fn.bgiframe&&g.bgiframe(),d.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle)},close:function(b){var c=this;if(!1===c._trigger("beforeclose",b))return;c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):c.uiDialog.hide()&&c._trigger("close",b),a.ui.dialog.overlay.resize(),c._isOpen=!1;if(c.options.modal){var d=0;a(".ui-dialog").each(function(){this!=c.uiDialog[0]&&(d=Math.max(d,a(this).css("z-index")))}),a.ui.dialog.maxZ=d}},isOpen:function(){return this._isOpen},moveToTop:function(b,c){if(this.options.modal&&!b||!this.options.stack&&!this.options.modal)return this._trigger("focus",c);this.options.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=this.options.zIndex),this.overlay&&this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=++a.ui.dialog.maxZ);var d={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};this.uiDialog.css("z-index",++a.ui.dialog.maxZ),this.element.attr(d),this._trigger("focus",c)},open:function(){if(this._isOpen)return;var b=this.options,c=this.uiDialog;this.overlay=b.modal?new a.ui.dialog.overlay(this):null,c.next().length&&c.appendTo("body"),this._size(),this._position(b.position),c.show(b.show),this.moveToTop(!0),b.modal&&c.bind("keypress.ui-dialog",function(b){if(b.keyCode!=a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first")[0],e=c.filter(":last")[0];b.target==e&&!b.shiftKey?setTimeout(function(){d.focus()},1):b.target==d&&b.shiftKey&&setTimeout(function(){e.focus()},1)}),a([]).add(c.find(".ui-dialog-content :tabbable:first")).add(c.find(".ui-dialog-buttonpane :tabbable:first")).add(c).filter(":first").focus(),this._trigger("open"),this._isOpen=!0},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){a('<button type="button"></button>').addClass("ui-state-default ui-corner-all").text(b).click(function(){d.apply(c.element[0],arguments)}).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){a(this).addClass("ui-state-focus")}).blur(function(){a(this).removeClass("ui-state-focus")}).appendTo(e)}),e.appendTo(this.uiDialog))},_makeDraggable:function(){var b=this,c=this.options,d;this.uiDialog.draggable({cancel:".ui-dialog-content",handle:".ui-dialog-titlebar",containment:"document",start:function(){d=c.height,a(this).height(a(this).height()).addClass("ui-dialog-dragging"),c.dragStart&&c.dragStart.apply(b.element[0],arguments)},drag:function(){c.drag&&c.drag.apply(b.element[0],arguments)},stop:function(){a(this).removeClass("ui-dialog-dragging").height(d),c.dragStop&&c.dragStop.apply(b.element[0],arguments),a.ui.dialog.overlay.resize()}})},_makeResizable:function(b){b=b===undefined?this.options.resizable:b;var c=this,d=this.options,e=typeof b=="string"?b:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:d.minHeight,start:function(){a(this).addClass("ui-dialog-resizing"),d.resizeStart&&d.resizeStart.apply(c.element[0],arguments)},resize:function(){d.resize&&d.resize.apply(c.element[0],arguments)},handles:e,stop:function(){a(this).removeClass("ui-dialog-resizing"),d.height=a(this).height(),d.width=a(this).width(),d.resizeStop&&d.resizeStop.apply(c.element[0],arguments),a.ui.dialog.overlay.resize()}}).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_position:function(b){var c=a(window),d=a(document),e=d.scrollTop(),f=d.scrollLeft(),g=e;a.inArray(b,["center","top","right","bottom","left"])>=0&&(b=[b=="right"||b=="left"?b:"center",b=="top"||b=="bottom"?b:"middle"]),b.constructor!=Array&&(b=["center","middle"]);if(b[0].constructor==Number)f+=b[0];else switch(b[0]){case"left":f+=0;break;case"right":f+=c.width()-this.uiDialog.outerWidth();break;default:case"center":f+=(c.width()-this.uiDialog.outerWidth())/2}if(b[1].constructor==Number)e+=b[1];else switch(b[1]){case"top":e+=0;break;case"bottom":e+=c.height()-this.uiDialog.outerHeight();break;default:case"middle":e+=(c.height()-this.uiDialog.outerHeight())/2}e=Math.max(e,g),this.uiDialog.css({top:e,left:f})},_setData:function(d,e){b[d]&&this.uiDialog.data(b[d],e);switch(d){case"buttons":this._createButtons(e);break;case"closeText":this.uiDialogTitlebarCloseText.text(e);break;case"dialogClass":this.uiDialog.removeClass(this.options.dialogClass).addClass(c+e);break;case"draggable":e?this._makeDraggable():this.uiDialog.draggable("destroy");break;case"height":this.uiDialog.height(e);break;case"position":this._position(e);break;case"resizable":var f=this.uiDialog,g=this.uiDialog.is(":data(resizable)");g&&!e&&f.resizable("destroy"),g&&typeof e=="string"&&f.resizable("option","handles",e),g||this._makeResizable(e);break;case"title":a(".ui-dialog-title",this.uiDialogTitlebar).html(e||"&nbsp;");break;case"width":this.uiDialog.width(e)}a.widget.prototype._setData.apply(this,arguments)},_size:function(){var a=this.options;this.element.css({height:0,minHeight:0,width:"auto"});var b=this.uiDialog.css({height:"auto",width:a.width}).height();this.element.css({minHeight:Math.max(a.minHeight-b,0),height:a.height=="auto"?"auto":Math.max(a.height-b,0)})}}),a.extend(a.ui.dialog,{version:"1.7.3",defaults:{autoOpen:!0,bgiframe:!1,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:"center",resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},getter:"isOpen",uuid:0,maxZ:0,getTitleId:function(a){return"ui-dialog-title-"+(a.attr("id")||++this.uuid)},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){var c=a(b.target).parents(".ui-dialog").css("zIndex")||0;return c>a.ui.dialog.overlay.maxZ})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&c.keyCode&&c.keyCode==a.ui.keyCode.ESCAPE&&b.close(c)}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=a("<div></div>").appendTo(document.body).addClass("ui-widget-overlay").css({width:this.width(),height:this.height()});return b.options.bgiframe&&a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){this.instances.splice(a.inArray(this.instances,b),1),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var c=0;a.each(this.instances,function(){c=Math.max(c,this.css("z-index"))}),this.maxZ=c},height:function(){if(a.browser.msie&&a.browser.version<7){var b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return b<c?a(window).height()+"px":b+"px"}return a(document).height()+"px"},width:function(){if(a.browser.msie&&a.browser.version<7){var b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return b<c?a(window).width()+"px":b+"px"}return a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);