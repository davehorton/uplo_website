/**
 * @license Highcharts JS v2.1.9 (2011-11-11)
 * Exporting module
 *
 * (c) 2010-2011 Torstein Hønsi
 *
 * License: www.highcharts.com/license
 */
// JSLint options:
/*global Highcharts, document, window, Math, setTimeout */
(function(){var a=Highcharts,b=a.Chart,c=a.addEvent,d=a.removeEvent,e=a.createElement,f=a.discardElement,g=a.css,h=a.merge,i=a.each,j=a.extend,k=Math,l=k.max,m=document,n=window,o=m.documentElement.ontouchstart!==undefined,p="M",q="L",r="div",s="hidden",t="none",u="highcharts-",v="absolute",w="px",x,y=a.getOptions();j(y.lang,{downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",exportButtonTitle:"Export to raster or vector image",printButtonTitle:"Print the chart"}),y.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF"},menuItemStyle:{padding:"0 5px",background:t,color:"#303030",fontSize:o?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{align:"right",backgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#F7F7F7"],[.6,"#E3E3E3"]]},borderColor:"#B0B0B0",borderRadius:3,borderWidth:1,height:20,hoverBorderColor:"#909090",hoverSymbolFill:"#81A7CF",hoverSymbolStroke:"#4572A5",symbolFill:"#E0E0E0",symbolStroke:"#A0A0A0",symbolX:11.5,symbolY:10.5,verticalAlign:"top",width:24,y:10}},y.exporting={type:"image/png",url:"http://export.highcharts.com/",width:800,enableImages:!1,buttons:{exportButton:{symbol:"exportIcon",x:-10,symbolFill:"#A8BF77",hoverSymbolFill:"#768F3E",_id:"exportButton",_titleKey:"exportButtonTitle",menuItems:[{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]},printButton:{symbol:"printIcon",x:-36,symbolFill:"#B5C9DF",hoverSymbolFill:"#779ABF",_id:"printButton",_titleKey:"printButtonTitle",onclick:function(){this.print()}}}},j(b.prototype,{getSVG:function(b){var c=this,d,g,k,l,n,o,p,q=h(c.options,b);return m.createElementNS||(m.createElementNS=function(b,c){var d=m.createElement(c);return d.getBBox=function(){return a.Renderer.prototype.Element.prototype.getBBox.apply({element:d})},d}),g=e(r,null,{position:v,top:"-9999em",width:c.chartWidth+w,height:c.chartHeight+w},m.body),j(q.chart,{renderTo:g,forExport:!0}),q.exporting.enabled=!1,q.exporting.enableImages||(q.chart.plotBackgroundImage=null),q.series=[],i(c.series,function(a){l=a.options,l.animation=!1,l.showCheckbox=!1,l.visible=a.visible,q.exporting.enableImages||l&&l.marker&&/^url\(/.test(l.marker.symbol)&&(l.marker.symbol="circle"),l.data=[],i(a.data,function(a){n=a.config,o={x:a.x,y:a.y,name:a.name},typeof n=="object"&&a.config&&n.constructor!==Array&&j(o,n),o.visible=a.visible,l.data.push(o),q.exporting.enableImages||(p=a.config&&a.config.marker,p&&/^url\(/.test(p.symbol)&&delete p.symbol)}),q.series.push(l)}),d=new Highcharts.Chart(q),i(["xAxis","yAxis"],function(a){i(c[a],function(b,c){var e=d[a][c],f=b.getExtremes(),g=f.userMin,h=f.userMax;(g!==x||h!==x)&&e.setExtremes(g,h,!0,!1)})}),k=d.container.innerHTML,q=null,d.destroy(),f(g),k=k.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/isTracker="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" ]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/<img ([^>]*)>/gi,"<image $1 />").replace(/<\/image>/g,"").replace(/<image ([^>]*)([^\/])>/gi,"<image $1$2 />").replace(/width=(\d+)/g,'width="$1"').replace(/height=(\d+)/g,'height="$1"').replace(/hc-svg-href="/g,'xlink:href="').replace(/style="([^"]+)"/g,function(a){return a.toLowerCase()}),k=k.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'"),k.match(/ xmlns="/g).length===2&&(k=k.replace(/xmlns="[^"]+"/,"")),k},exportChart:function(a,b){var c,d=this,g=d.getSVG(b);a=h(d.options.exporting,a),c=e("form",{method:"post",action:a.url},{display:t},m.body),i(["filename","type","width","svg"],function(b){e("input",{type:s,name:b,value:{filename:a.filename||"chart",type:a.type,width:a.width,svg:g}[b]},null,c)}),c.submit(),f(c)},print:function(){var a=this,b=a.container,c=[],d=b.parentNode,e=m.body,f=e.childNodes;if(a.isPrinting)return;a.isPrinting=!0,i(f,function(a,b){a.nodeType===1&&(c[b]=a.style.display,a.style.display=t)}),e.appendChild(b),n.print(),setTimeout(function(){d.appendChild(b),i(f,function(a,b){a.nodeType===1&&(a.style.display=c[b])}),a.isPrinting=!1},1e3)},contextMenu:function(a,b,d,f,h,k){var m=this,n=m.options.navigation,p=n.menuItemStyle,q=m.chartWidth,s=m.chartHeight,x="cache-"+a,y=m[x],z=l(h,k),A="3px 3px 10px #888",B,C,D;y||(m[x]=y=e(r,{className:u+a},{position:v,zIndex:1e3,padding:z+w},m.container),B=e(r,null,j({MozBoxShadow:A,WebkitBoxShadow:A,boxShadow:A},n.menuStyle),y),C=function(){g(y,{display:t})},c(y,"mouseleave",C),i(b,function(a){if(a){var b=e(r,{onmouseover:function(){g(this,n.menuItemHoverStyle)},onmouseout:function(){g(this,p)},innerHTML:a.text||m.options.lang[a.textKey]},j({cursor:"pointer"},p),B);b[o?"ontouchstart":"onclick"]=function(){C(),a.onclick.apply(m,arguments)},m.exportDivElements.push(b)}}),m.exportDivElements.push(B,y),m.exportMenuWidth=y.offsetWidth,m.exportMenuHeight=y.offsetHeight),D={display:"block"},d+m.exportMenuWidth>q?D.right=q-d-h-z+w:D.left=d-z+w,f+k+m.exportMenuHeight>s?D.bottom=s-f-z+w:D.top=f+k-z+w,g(y,D)},addButton:function(a){function q(){l.attr(p),k.attr(o)}var b=this,c=b.renderer,d=h(b.options.navigation.buttonOptions,a),e=d.onclick,f=d.menuItems,g=d.width,i=d.height,k,l,m,n=d.borderWidth,o={stroke:d.borderColor},p={stroke:d.symbolStroke,fill:d.symbolFill};b.exportDivElements||(b.exportDivElements=[],b.exportSVGElements=[]);if(d.enabled===!1)return;k=c.rect(0,0,g,i,d.borderRadius,n).align(d,!0).attr(j({fill:d.backgroundColor,"stroke-width":n,zIndex:19},o)).add(),m=c.rect(0,0,g,i,0).align(d).attr({id:d._id,fill:"rgba(255, 255, 255, 0.001)",title:b.options.lang[d._titleKey],zIndex:21}).css({cursor:"pointer"}).on("mouseover",function(){l.attr({stroke:d.hoverSymbolStroke,fill:d.hoverSymbolFill}),k.attr({stroke:d.hoverBorderColor})}).on("mouseout",q).on("click",q).add(),f&&(e=function(){q();var a=m.getBBox();b.contextMenu("export-menu",f,a.x,a.y,g,i)}),m.on("click",function(){e.apply(b,arguments)}),l=c.symbol(d.symbol,d.symbolX,d.symbolY,(d.symbolSize||12)/2).align(d,!0).attr(j(p,{"stroke-width":d.symbolStrokeWidth||1,zIndex:20})).add(),b.exportSVGElements.push(k,m,l)},destroyExport:function(){var a,b=this,c;for(a=0;a<b.exportSVGElements.length;a++)c=b.exportSVGElements[a],c.onclick=c.ontouchstart=null,b.exportSVGElements[a]=c.destroy();for(a=0;a<b.exportDivElements.length;a++)c=b.exportDivElements[a],d(c,"mouseleave"),b.exportDivElements[a]=c.onmouseout=c.onmouseover=c.ontouchstart=c.onclick=null,f(c)}}),a.Renderer.prototype.symbols.exportIcon=function(a,b,c){return[p,a-c,b+c,q,a+c,b+c,a+c,b+c*.5,a-c,b+c*.5,"Z",p,a,b+c*.5,q,a-c*.5,b-c/3,a-c/6,b-c/3,a-c/6,b-c,a+c/6,b-c,a+c/6,b-c/3,a+c*.5,b-c/3,"Z"]},a.Renderer.prototype.symbols.printIcon=function(a,b,c){return[p,a-c,b+c*.5,q,a+c,b+c*.5,a+c,b-c/3,a-c,b-c/3,"Z",p,a-c*.5,b-c/3,q,a-c*.5,b-c,a+c*.5,b-c,a+c*.5,b-c/3,"Z",p,a-c*.5,b+c*.5,q,a-c*.75,b+c,a+c*.75,b+c,a+c*.5,b+c*.5,"Z"]},b.prototype.callbacks.push(function(a){var b,d=a.options.exporting,e=d.buttons;if(d.enabled!==!1){for(b in e)a.addButton(e[b]);c(a,"destroy",a.destroyExport)}})})()