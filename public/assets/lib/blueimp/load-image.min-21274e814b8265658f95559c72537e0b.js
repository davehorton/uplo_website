(function(a){var b=function(a,c,d){var f=document.createElement("img"),g,h;return window.Blob&&a instanceof Blob?(g=b.createObjectURL(a),h=!0):g=a,f.onerror=c,f.onload=function(){h&&b.revokeObjectURL(g),c(b.scale(f,d))},g?(f.src=g,f):b.readFile(a,function(a){f.src=a})},c=window.createObjectURL&&window||window.URL&&URL||window.webkitURL&&webkitURL;b.scale=function(a,b){var b=b||{},c=document.createElement("canvas"),d=Math.max((b.minWidth||a.width)/a.width,(b.minHeight||a.height)/a.height);return 1<d&&(a.width=parseInt(a.width*d,10),a.height=parseInt(a.height*d,10)),d=Math.min((b.maxWidth||a.width)/a.width,(b.maxHeight||a.height)/a.height),1>d&&(a.width=parseInt(a.width*d,10),a.height=parseInt(a.height*d,10)),!b.canvas||!c.getContext?a:(c.width=a.width,c.height=a.height,c.getContext("2d").drawImage(a,0,0,a.width,a.height),c)},b.createObjectURL=function(a){return c?c.createObjectURL(a):!1},b.revokeObjectURL=function(a){return c?c.revokeObjectURL(a):!1},b.readFile=function(a,b){if(window.FileReader&&FileReader.prototype.readAsDataURL){var c=new FileReader;return c.onload=function(a){b(a.target.result)},c.readAsDataURL(a),c}return!1},"undefined"!=typeof define&&define.amd?define("loadImage",function(){return b}):a.loadImage=b})(this)