(function(e){var t=function(e,n,r){var i=document.createElement("img"),s,o;return window.Blob&&e instanceof Blob?(s=t.createObjectURL(e),o=!0):s=e,i.onerror=n,i.onload=function(){o&&t.revokeObjectURL(s),n(t.scale(i,r))},s?(i.src=s,i):t.readFile(e,function(e){i.src=e})},n=window.createObjectURL&&window||window.URL&&URL||window.webkitURL&&webkitURL;t.scale=function(e,t){var t=t||{},n=document.createElement("canvas"),r=Math.max((t.minWidth||e.width)/e.width,(t.minHeight||e.height)/e.height);return 1<r&&(e.width=parseInt(e.width*r,10),e.height=parseInt(e.height*r,10)),r=Math.min((t.maxWidth||e.width)/e.width,(t.maxHeight||e.height)/e.height),1>r&&(e.width=parseInt(e.width*r,10),e.height=parseInt(e.height*r,10)),!t.canvas||!n.getContext?e:(n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height),n)},t.createObjectURL=function(e){return n?n.createObjectURL(e):!1},t.revokeObjectURL=function(e){return n?n.revokeObjectURL(e):!1},t.readFile=function(e,t){if(window.FileReader&&FileReader.prototype.readAsDataURL){var n=new FileReader;return n.onload=function(e){t(e.target.result)},n.readAsDataURL(e),n}return!1},"undefined"!=typeof define&&define.amd?define("loadImage",function(){return t}):e.loadImage=t})(this);