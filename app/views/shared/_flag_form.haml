/ locals: text
#selection_container
  %div
    =radio_button("post", "category", "rails", :target => "violation")
    %span Terms of Use Violation
    =radio_button("post", "category", "rails", :target => "copyright")
    %span Copyright
    =radio_button("post", "category", "rails", :target => "nudity")
    %span{:style => "padding-right:0px"} Nudity
  #violation.form_flag_element{:style => "display:none"}
    .line-separator.left
    Reason for reporting: 
    %br
    %br
    =text_area_tag "reason", "", :style => "width: 100%; -webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing:border-box;"
    %br
    %br{:style => "clear:both"}
    .button.submit.left{:style => "padding-right:10px", :target => ImageFlag::FLAG_TYPE['terms_of_use_violation']}
    .button.cancel.left
  #copyright.form_flag_element{:style => "display:none"}
    .line-separator.left
    Who owns this photo? 
    %br
    %br
    =text_area_tag "reason", "", :style => "width: 100%; -webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing:border-box;"
    %br
    %br{:style => "clear:both"}
    .button.submit.left{:style => "padding-right:10px", :target => ImageFlag::FLAG_TYPE['copyright']}
    .button.cancel.left
  #nudity.form_flag_element{:style => "display:none"}
    .line-separator.left
    %br
    %br

    .button.submit.left{:style => "padding-right:10px", :target => ImageFlag::FLAG_TYPE['nudity']}
    .button.cancel.left

#thank_form{:style => "display:none"}
  Thanks. We'll review this photo as soon as possible.
  .line-separator.left
  %br
  %br
  .button.dismiss.left

- content_for :js do
  = javascript_tag do
    :erb
      $("#selection_container input").click(function(){
        $(".form_flag_element").hide();
        $("#" + $(this).attr('target')).show();
      });

      $("#selection_container .button.submit").click(function(){
        var desc = $(this).parent().find("textarea").val();
        if (desc == undefined)
          desc = "";
        var type = $(this).attr("target");
        submit_flag(desc, type)
      });
      
      $("#thank_form .dismiss").click(function(){
        if (history.length)
          history.go(-1);
        else
          window.location = "/browse";
      });

      function show_thank_form(){
        $("#selection_container").hide();
        $("#thank_form").show();
      };	
