<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name = "viewport" content = "user-scalable = no">
		<title>UPLO Sale Chart</title>

		<script type="text/javascript" src="/assets/lib/jquery.min.js"></script>
		<script type="text/javascript">
$(function () {
    var chart;
    var months = [];
    var month_sales = [];
	var max_sale = 0;
    <%  @monthly_sales.each do |sale| %>
            months.push("<br /><span style=\"font-size:30px; font-family:Helvetica; color:black;\"><%= sale[:month] %></span>");
            month_sales.push(<%= sale[:sales] %>);
			if (max_sale < <%= sale[:sales] %>)
				max_sale = <%= sale[:sales] %>;
    <% end %>
    $(document).ready(function() {
		
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            navigation:{
                buttonOptions:{
                    enabled:false
                              }
                       },
            title: {
                text: '<br/>'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                lineWidth:2,
                categories: months
            },
            yAxis: {
                min: 0,
                tickWidth: 1,
				tickInterval: max_sale > 3 ? null : 1 , 
                labels: {
                      style: {
                         color: 'black',
                         fontWeight: 'bold',
                         font: '30px Helvetica, Verdana, sans-serif'
                            }
                        },
                title: {
                    text: '<span style="font-size:30px; font-family:Helvetica; color:black;">Sales By Month</span>'
                }
            },
            legend: {
                layout: 'vertical',
                backgroundColor: '#FFFFFF',
                align: 'right',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                shadow: true
            },
            tooltip: {
                formatter: function() {

                    return ''+
                        this.x +'<span style="font-size:30px; font-family:Helvetica; color:black;font-weight:bold;">: '+ this.y +' sales</span>';
                }
            },
            plotOptions: {
                column: {
                    pointPadding: 0,
                    borderWidth: 0,
                    color:{
                            linearGradient: [0, 0, 0, 290],
                            stops: [
                                [0, '#ed3b03'],
                                [1, '#aa0b00']
                            ]
                        },
                }
            },
                series: [ {
                name: 'Sales',
                data: month_sales

            }]
        });
    });

});
		</script>
	</head>
	<body>

    <script src="/assets/lib/column_charts/highcharts.js"></script>
    <script src="/assets/lib/column_charts/exporting.js"></script>

    <div id="container" style="min-width: 400px; height: 460px; margin: 0 auto" ></div>

	</body>
</html>
