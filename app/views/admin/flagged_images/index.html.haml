= render :partial => "admin/admin_menu"
.header
  .admin_title.left_area
    = t('admin.flagged_images_area.title')
  .right_area
    = form_tag({:action => :index}, :id => "flag_type_form", :method=>'post', :multipart => true) do
      .left
        Sort By:
        = select_tag :flag_type, options_for_select(@categories, params[:flag_type]), :id => "flagged_image_type"
      .button.remove_all.left#remove_flagged_images
      .button.reinstate_all.left#reinstate_flagged_images

.list_flagged_images
  - i = 0
  - @flagged_images.each do |image|
    - i = i + 1
    - flag = image.image_flags.first
    - flag_type = (flag.flag_type == 1 ? "Terms of Use Violation" : (flag.flag_type == 2 ? "Copyright" : "Nudity"))
    - if (i % 6) == 0
      .flagged_image_last_element 
        = render :partial => "admin/flagged_images/flagged_image_cell", :locals => {:image => image, :flag => flag, :flag_type => flag_type}
    - else
      = render :partial => "admin/flagged_images/flagged_image_cell", :locals => {:image => image, :flag => flag, :flag_type => flag_type}


:erb
  <script type="text/javascript">
   $(document).ready(function(){
     $("#flagged_image_type").change(function(){
       $("#flag_type_form").submit();
     });
     $("#flagged_image_type-button").css("width", "160px").css("height", "20px");
     $("#flagged_image_type-menu").css("width", "160px");
     $("#flagged_image_type-button .ui-selectmenu-status").css("padding-top", "3px");
     $('#remove_flagged_images').click(function(){
       $('#flag_type_form').attr('action','<%= url_for(:action => :remove_all)%>');
       $("#flag_type_form").submit();
     });
     $('#reinstate_flagged_images').click(function(){
       $('#flag_type_form').attr('action','<%= url_for(:action => :reinstate_all)%>');
       $("#flag_type_form").submit();
     });
   });

  </script>
